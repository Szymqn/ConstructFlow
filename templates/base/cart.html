{% load static %}
{% block content %}
<div class="container">
    <div class="cart-header">
        <h1>Your Cart</h1>
    </div>
    <ul>
        {% for item in cart_items %}
        <li class="cart-item">
            {% if item.product %}
            <div class="cart-item-details">
                <div class="cart-item-name">{{ item.product.name }}</div>
                ${{ item.product.price }}<br>
                {{ item.product_quality }}
                <div class="item-quantity">{{ item.product_quantity }}</div>
                <form action="{% if item.product.id %}{% url 'increase-product-cart-item' item.product.id %}{% endif %}" method="post">
                    {% csrf_token %}
                    <button class="quantity-btn increase-quantity" type="submit">+</button>
                </form>
                <form action="{% url 'decrease-product-cart-item' item.product.id %}" method="post">
                    {% csrf_token %}
                    <button class="quantity-btn decrease-quantity" type="submit">-</button>
                </form>
                <form action="{% if item.product.id %}{% url 'remove-product-from-cart' item.product.id %}{% endif %}" method="post">
                    {% csrf_token %}
                    <button class="remove-from-cart-btn" type="submit">Remove</button>
                </form>
            </div>
            {% elif item.equipment %}
                <div class="cart-item-name">{{ item.equipment.name }}</div>
                <div class="cart-item-details">
                ${{ item.equipment.price }}<br>
                {{ item.equipment_quality }}
                <form action="{% url 'increase-equipment-cart-item' item.equipment.id %}" method="post">
                    {% csrf_token %}
                    <button class="quantity-btn increase-quantity" type="submit">+</button>
                </form>
                <form action="{% url 'decrease-equipment-cart-item' item.equipment.id %}" method="post">
                    {% csrf_token %}
                    <button class="quantity-btn decrease-quantity" type="submit">-</button>
                </form>
                    <form action="{% if item.equipment.id %}{% url 'remove-equipment-from-cart' item.equipment.id %}{% endif %}" method="post">
                        {% csrf_token %}
                        <button class="remove-from-cart-btn" type="submit">Remove</button>
                    </form>
                </div>
            {% endif %}
        </li>
        {% endfor %}
    </ul>

    <div class="cart-total">
        <p>Total: ${{ total_amount }}</p>
    </div>
    Continue Shopping
    <a class="continue-shopping-link" href="{% url 'product-list' %}">Products</a>
    <a class="continue-shopping-link" href="{% url 'equipment-list' %}">Equipments</a>

    <a class="checkout-button" href="#">Checkout</a>
</div>
<script src="{% static 'js/cart.js' %}"></script>
{% endblock %}